<?xml version="1.0" encoding="UTF-8" ?>

<project name="WordPress for BlackBerry" default="simulator" basedir="..">

	<target name="init">
		<property file="build/build.properties" />
	</target>

	<taskdef resource="org/tigris/subversion/svnant/svnantlib.xml">
		<classpath>
			<fileset dir="build/svnant-1.3.0" includes="svn*.jar" />
		</classpath>
	</taskdef>
	
	  <taskdef resource="net/sf/antcontrib/antcontrib.properties">
	    <classpath>
	      <pathelement location="build/ant-contrib-1.0b3.jar"/>
	    </classpath>
	  </taskdef>


	<!-- =============================================== -->
	<!-- USAGE                                           -->
	<!-- =============================================== -->
	<target name="usage" depends="init">
		<echo message=""/>
		<echo message="WordPress for BlackBerry build file"/>
		<echo message="------------------------------------------------------"/>
		<echo message=""/>
		<echo message=" Available targets are :"/>
		<echo message=""/>
		<echo message=" usage                --> Print this usage listing"/>
		<echo message=" buildOS42            --> Build OS 4.2 version"/>
		<echo message=" buildOS47            --> Build OS 4.7 version"/>
		<echo message=" build                --> Build all versions"/>
		<echo message=" all                  --> Equivalent to build"/>
		<echo message=" cleanOS42            --> Clean OS 4.2 version"/>
		<echo message=" cleanOS47            --> Clean OS 4.7 version"/>
		<echo message=" clean                --> Clean all versions"/>
		<echo message=" releaseOS42          --> "/>
		<echo message=" releaseOS47          --> "/>
		<echo message=" release              --> "/>
		<echo message=""/>
	</target>


	<target name="clean" depends="cleanOS42, cleanOS47" />
	
	<target name="cleanOS42" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os42"/>
		</ant>
	</target>

	<target name="cleanOS47" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os47"/>
		</ant>
	</target>

	<target name="all" depends="clean, build" />
	<target name="build" depends="buildOS42, buildOS47" />

	<target name="buildOS42" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os42"/>
			<property name="rim.home"         value="${rim.home.os42}"/>
		</ant>
	</target>

	<target name="buildOS47" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os47"/>
			<property name="rim.home"         value="${rim.home.os47}"/>
		</ant>
	</target>

	<!-- target name="release" depends="releaseOS42, releaseOS47">
	</target -->

	<target name="releaseOS42" depends="init, cleanOS42">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
        	
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform"         value="os42"/>
			<property name="rim.home"         value="${rim.home.os42}"/>
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>

	<target name="releaseOS47" depends="init, cleanOS47">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="is_os47_or_above"   value="true" />
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
	
	
	<target name="nightlyOS42" depends="init, cleanOS42">
	        <property file="build/build.properties" />
	        <property file="build/release.properties" />
			<svn>
				<info target="${basedir}" />
			</svn>
			<ant antfile="build/build_single.xml" target="release">
				<property name="platform" value="os42" />
				<property name="rim.home" value="${rim.home.os42}" />
		        <property name="module.version" value="${release.major}.${release.minor}.${svn.info.lastRev}" />
			</ant>
	</target>

		
	<target name="nightlyOS47" depends="init, cleanOS47">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
		<svn>
			<info target="${basedir}" />
		</svn>
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="is_os47_or_above"   value="true" />
	        <property name="module.version" value="${release.major}.${release.minor}.${svn.info.lastRev}" />
		</ant>		
	</target>

	
	<target name="simulator" depends="init, cleanOS42">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
        	
		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os42" />
			<property name="rim.home" value="${rim.home.os42}" />
			<property name="log_console" value="true"/>
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
	
	
	<target name="simulatorOS47" depends="init, cleanOS47">
       
		<property file="build/build.properties" />
        <property file="build/release.properties" />
		
		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="log_console" value="true" />
			<property name="is_os47_or_above"   value="true" />
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
	
	
	<!-- These are the ant targets for 1.0 release only -->
	<target name="release1_0" depends="init, cleanOS42">
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os42" />
			<property name="rim.home" value="${rim.home.os42}" />
			<property name="module.version" value="1.0" /> 
		</ant>
	</target>

	<target name="release1_0_OS47" depends="init, cleanOS47">
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="module.version" value="1.0" />
		</ant>
	</target>
	
</project>