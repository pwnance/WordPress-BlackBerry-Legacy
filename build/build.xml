<?xml version="1.0" encoding="UTF-8" ?>

<project name="WordPress for BlackBerry" default="simulator" basedir="..">

	<target name="init">
		<property file="build/build.properties" />
	</target>

	<taskdef resource="org/tigris/subversion/svnant/svnantlib.xml">
		<classpath>
			<fileset dir="build/svnant-1.3.0" includes="svn*.jar" />
		</classpath>
	</taskdef>
	
	  <taskdef resource="net/sf/antcontrib/antcontrib.properties">
	    <classpath>
	      <pathelement location="build/ant-contrib-1.0b3.jar"/>
	    </classpath>
	  </taskdef>


	<!-- =============================================== -->
	<!-- USAGE                                           -->
	<!-- =============================================== -->
	<target name="usage" depends="init">
		<echo message=""/>
		<echo message="WordPress for BlackBerry build file"/>
		<echo message="------------------------------------------------------"/>
		<echo message=""/>
		<echo message=" Available targets are :"/>
		<echo message=""/>
		<echo message=" usage                --> Print this usage listing"/>
		<echo message=" cleanOS42            --> Clean OS 4.5 version"/>
		<echo message=" cleanOS47            --> Clean OS 4.7 version"/>
		<echo message=" cleanOS50            --> Clean OS 5.0 version"/>
		<echo message=" clean                --> Clean all versions"/>
		<echo message=" releaseOS42          --> "/>
		<echo message=" releaseOS47          --> "/>
		<echo message=" releaseOS50          --> "/>
		<echo message=""/>
	</target>


	<target name="clean" depends="cleanOS45, cleanOS47, cleanOS50" />
	
	<target name="cleanOS45" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os45"/>
		</ant>
	</target>

	<target name="cleanOS47" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os47"/>
		</ant>
	</target>
	
	<target name="cleanOS50" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os50"/>
		</ant>
	</target>

	<!-- target name="all" depends="clean, build" />
	
	<target name="build" depends="buildOS45, buildOS47" />

	<target name="buildOS45" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os45"/>
			<property name="rim.home"         value="${rim.home.os45}"/>
		</ant>
	</target>

	<target name="buildOS47" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os47"/>
			<property name="rim.home"         value="${rim.home.os47}"/>
		</ant>
	</target>

	<target name="release" depends="releaseOS42, releaseOS47">
	</target -->

	<target name="releaseOS45" depends="init, cleanOS45">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
        	
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform"         value="os45"/>
			<property name="rim.home"         value="${rim.home.os45}"/>
			<property name="module.version" value="${release.major}.${release.minor}" />
		</ant>
	</target>

	<target name="releaseOS47" depends="init, cleanOS47">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="is_os47_or_above"   value="true" />
			<property name="module.version" value="${release.major}.${release.minor}" />
		</ant>
	</target>
	
	<!--
	<target name="nightlyOS45" depends="init, cleanOS45">
	        <property file="build/build.properties" />
	        <property file="build/release.properties" />
			<svn>
				<info target="${basedir}" />
			</svn>
			<ant antfile="build/build_single.xml" target="release">
				<property name="platform" value="os45" />
				<property name="rim.home" value="${rim.home.os45}" />
		        <property name="module.version" value="${release.major}.${release.minor}.${svn.info.lastRev}" />
			</ant>
	</target>

		
	<target name="nightlyOS47" depends="init, cleanOS47">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
		<svn>
			<info target="${basedir}" />
		</svn>
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="is_os47_or_above"   value="true" />
	        <property name="module.version" value="${release.major}.${release.minor}.${svn.info.lastRev}" />
		</ant>		
	</target>
	-->
	<target name="simulator" depends="init, cleanOS45">
        <property file="build/build.properties" />
        <property file="build/release.properties" />
        	
		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os45" />
			<property name="rim.home" value="${rim.home.os45}" />
			<property name="log_console" value="true"/>
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
		
	<target name="simulatorOS47" depends="init, cleanOS47">
       
		<property file="build/build.properties" />
        <property file="build/release.properties" />
		
		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="log_console" value="true" />
			<property name="is_os47_or_above"   value="true" />
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
	
	<target name="simulatorOS50" depends="init, cleanOS50">
       
		<property file="build/build.properties" />
        <property file="build/release.properties" />
		
		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os50" />
			<property name="rim.home" value="${rim.home.os50}" />
			<property name="log_console" value="true" />
			<property name="is_os47_or_above"   value="true" />
			<property name="is_os50_or_above"   value="true" />
			<property name="module.version" value="${release.major}.${release.minor}.${build.number}" />
		</ant>
	</target>
	
</project>