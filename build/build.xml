<?xml version="1.0" encoding="UTF-8" ?>

<project name="WordPress for BlackBerry" default="simulator" basedir="..">

	<target name="init">
		<property file="build/build.properties" />
	</target>

	<taskdef resource="org/tigris/subversion/svnant/svnantlib.xml">
		<classpath>
			<fileset dir="build/svnant-1.2.1" includes="svn*.jar" />
		</classpath>
	</taskdef>


	<!-- =============================================== -->
	<!-- USAGE                                           -->
	<!-- =============================================== -->
	<target name="usage" depends="init">
		<echo message=""/>
		<echo message="WordPress for BlackBerry build file"/>
		<echo message="------------------------------------------------------"/>
		<echo message=""/>
		<echo message=" Available targets are :"/>
		<echo message=""/>
		<echo message=" usage                --> Print this usage listing"/>
		<echo message=" buildOS42            --> Build OS 4.2 version"/>
		<echo message=" buildOS47            --> Build OS 4.7 version"/>
		<echo message=" build                --> Build all versions"/>
		<echo message=" cleanOS42            --> Clean OS 4.2 version"/>
		<echo message=" cleanOS47            --> Clean OS 4.7 version"/>
		<echo message=" clean                --> Clean all versions"/>
		<echo message=" releaseOS42          --> "/>
		<echo message=" releaseOS47          --> "/>
		<echo message=" release              --> "/>
		<echo message=" all                  --> Equivalent to build"/>
		<echo message=""/>
	</target>


	<target name="clean" depends="cleanOS42, cleanOS47" />
	
	<target name="cleanOS42" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os42"/>
		</ant>
	</target>

	<target name="cleanOS47" depends="init">
		<ant antfile="build/build_single.xml" target="clean">
			<property name="platform"         value="os47"/>
		</ant>
	</target>

	
	<target name="build" depends="buildOS42, buildOS47" />

	<target name="buildOS42" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os42"/>
			<property name="rim.home"         value="${rim.home.os42}"/>
		</ant>
	</target>

	<target name="buildOS47" depends="init">
		<ant antfile="build/build_single.xml" target="all">
			<property name="platform"         value="os47"/>
			<property name="rim.home"         value="${rim.home.os47}"/>
		</ant>
	</target>

	<target name="release" depends="releaseOS42, releaseOS47">
	</target>

	<target name="releaseOS42" depends="init, cleanOS42">
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform"         value="os42"/>
			<property name="rim.home"         value="${rim.home.os42}"/>
		</ant>
	</target>

	<target name="releaseOS47" depends="init, cleanOS47">
		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
		</ant>
	</target>

	
	<!-- target name="build"  depends="buildOS42, buildOS47" / -->
	
	<target name="release1_0" depends="init, cleanOS42">
		<svn>
			<info target="${basedir}" />
		</svn>

		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os42" />
			<property name="rim.home" value="${rim.home.os42}" />
			<property name="module.version" value="1.0" /> 
		</ant>
	</target>

	
	<target name="nightly" depends="init, cleanOS42">
		<svn>
			<info target="${basedir}" />
		</svn>

		<ant antfile="build/build_single.xml" target="release">
			<property name="platform" value="os42" />
			<property name="rim.home" value="${rim.home.os42}" />
		</ant>
	</target>

	<target name="simulator" depends="init, cleanOS42">
		<svn>
			<info target="${basedir}" />
		</svn>

		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os42" />
			<property name="rim.home" value="${rim.home.os42}" />
			<property name="debug" value="true" />
			<property name="log_console" value="true" />
		</ant>
	</target>
	
	<target name="simulatorOS47" depends="init, cleanOS47">
		<svn>
			<info target="${basedir}" />
		</svn>

		<ant antfile="build/build_single.xml" target="rapc">
			<property name="platform" value="os47" />
			<property name="rim.home" value="${rim.home.os47}" />
			<property name="debug" value="true" />
			<property name="log_console" value="true" />
		</ant>
	</target>
	
	<target name="all" depends="clean, build" />

</project>